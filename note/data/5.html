什么是数据库设计

简单来说 数据库设计就是根据业务系统的具体需要 结合我们所选用的DBMS(数据库管理系统)
为这个业务系统构造出最优的数据存储模型 并建立好数据库中的表结构及表与表之间的关联关系的过程
使之能有效的对应用系统中的数据进行存储 并可以高效的对已经存储的数据进行访问

为什么要进行数据库设计
优良的设计        糟糕的设计
减少数据冗余      存在大量数据冗余
避免数据维护异常  存在数据插入 更新 删除异常
节约存储空间      浪费大量存储空间
高效的访问        访问数据低效

需求分析 --- 逻辑设计 --- 物理设计 --- 维护优化
数据库需要的作用点
1.数据是什么
2.数据有哪些属性
3.数据和属性各自的特点有那些
逻辑设计 使用ER图对数据库进行逻辑建模
物理设计 根据数据库自身的特点把逻辑设计转换为物理设计
维护优化
1.新的需求进行建表
2.索引优化
3.大表拆分

为什么要进行需求分析
1.了解系统中所要存储的数据
2.了解数据的存储特点
3.了解数据的生命周期

要搞清楚的一些问题
1.实体及实体之间的关系(1对1,1对多,多对多)
2.实体所包含的属性有什么
3.那些属性或属性的组合可以唯一标识一个实体

以一个小型的电子商务网站为例 在这个电子商务网站的系统中包括了几个核心模块
用户模块 商品模块 订单模块 购物车模块 供应商模块

用户模块
用于记录注册用户信息
包括属性 用户名 密码 电话 邮箱 身份证号 地址 姓名 昵称 ...
可选唯一标识属性 用户名 身份证 电话
存储特点 随系统上线时间逐渐增加 需要永久存储

商品模块 用于记录网站中所销售的商品信息
包括属性 商品编码 商品名称 商品描述 商品品类 供应商名称 重量 有效期 价格 ...
可选唯一标识属性 (商品名称,供应商名称),(商品编码)
存储特点 对于下线商品可以归档存储

购物车模块 用于保存用户购物时选对的商品
包括属性 用户名 商品编号 商品名称 商品价格 商品描述 商品分类 加入时间 商品数量 ...
可选唯一标识 (用户名,商品编号,加和时间),购物车编号
存储特点 不用永久存储(设置归档,清现规则)

供应商模块 用于保存所销售商品的供应商信息
包括属性 供应商编号 供应商名称 联系人 电话 营业执照号 地址 法人 ...
可选唯一标识 供应商编号,营业执照号
存储特点 永久存储

用户 ---一对多--- 订单 ---多对多--- 商品 ---多对多--- 供应商
用户 ---一对多--- 购物车 ---多对多--- 商品

逻辑设计
逻辑设计是做什么的
1.将需求转化为数据库的逻辑模型
2.通过ER图的型式对逻辑模型进行展示
3.同所选用的具体的DBMS系统无关

关系 一个关系对应通常所说的一张表
元组 表中的一行即为一个元组
属性 表中的一列即为一个属性 每一个属性都有一个名称 称为属性名
候选码 表中的某个属性组 它可以唯一确定一个元组
主码 一个关系有多个候选码 选定其中一个为主码
域 属性的取值范围
分量 元组中的一个属性值

ER图例说明
矩形 表示实体集 矩形内写实体集的名字
菱形 表示联系集
椭圆 表示实体的属性
线段 将属性连接到实体集 或将实体集连接到联系集

设计范式概要
1.用户信息
2.购物车信息   
二个使用一张表还是单独使用一张表

什么是数据库设计范式
常见数据库设计范式包括
第一范式 第二范式 第三范式及BC范式
当然还有第四及第五范式

操作异常
插入异常 如果某实体随着另一个实体的存在而存在 即缺少某个实体时无法表示这个实体 那么这个表就存在插入异常
更新异常 如果更改表所对应的某个实体实例的单独属性时 需要将多行更新 那么就说这个表存在更新异常
删除异常 如果删除表的某一行来反映某实体实例 失效时导致另一个不同实体实例信息丢失 那么这个表中就存在删除异常

数据操作异常及数据冗余
数据冗余
是指相同的数据在多个地方存在 或者说表中的
某个列可以由其它列计算得到 这样就说表中存在着数据冗余

第一范式(1NF)
定义 数据库表中的所有字段都是单一属性 不可再分的
这个单一属性是由基本的数据类型所构成的 如整数 浮点数 字符串
换句话说 第一范式要求数据库中的表都是二维表
第二范式(2NF)
定义 数据库的表中不存在非关键字段对任一候选关键字段的部分函数依赖
部分函数依赖是指存在着组合关键字中的某一关键字决定非关键字的情况
换句话说 所有单关键字段的表都符合第二范式

商品名称  供应商名称  价格  描述  重量  供应商电话  有效期   分类
可乐      饮料一厂    3           250g  88888       2014.12  饮料
可乐      饮料二厂    3           250g  66666       2014.12  饮料
由于供应商和商品之间是多对多的关系
所以只有使用商品名称和供应商品名称才可以唯一标识出一件商品
也就是商品名称和供应商名称是一组组合关键字
上表中存在以下的部份函数依赖关系
(商品名称) ---> (价格 描述 重量 商品有效期)
(供应商名称) ---> (供应商电话)
可拆分
商品ID 商品名称 价格 描述 重量 有效期 分类
供应商ID 供应商名称 供应商电话
供应商ID 商品ID

第三范式
定义
第三范式是在第二范式的基础之上定义的
如果数据表中不存在非关键字段
对任意候选择关键字段的传递函数依赖则符合第三范式

Boyce.Codd范式(BCNF)
在第三范式的基础之上 数据库表中如果不存在任何字段对任一候选关键字段的传递函数
依赖则符合BC范式
也就是说如果是复合关键字 则复合关键字之间也不能存在函数依赖关系
供应商联系人只能受雇于一家供应商 每家供应商可以供应多个商品
则存在如下决定关系 (供应商,商品ID) ---> (联系人,商品数量) (联系人,商品ID) ---> (供应商,商品数量)

物理设计要做什么
1.选择合适的数据库管理系统 Oracle,SQLServer,MySQL及PgSQL
2.定义数据库 表及字段的命名规范
3.根据所选择的DBMS系统选择合适的字段类型
4.反范式化设计
